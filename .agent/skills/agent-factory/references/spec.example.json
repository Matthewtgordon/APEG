{
  "project": {
    "name": "ExampleProject",
    "updated": "2025-01-05",
    "one_liner": "ExampleProject is a demo service for agent file generation.",
    "stack": {
      "language": "Python",
      "version": "3.11",
      "framework": "FastAPI",
      "database": "SQLite"
    },
    "architecture": "Async API + Worker"
  },
  "agents": {
    "always": [
      "Use repository-relative paths in responses",
      "Update ExecPlan progress after each step"
    ],
    "ask_first": [
      "Adding new dependencies to requirements.txt",
      "Modifying database schema"
    ],
    "never": [
      "Commit secrets or credentials",
      "Delete existing tests"
    ],
    "key_files": [
      {"purpose": "Entry point", "path": "src/main.py"},
      {"purpose": "API routes", "path": "src/api/routes.py"},
      {"purpose": "Tests", "path": "tests/"}
    ]
  },
  "context": {
    "generated": "2025-01-05 14:30Z",
    "immediate_action": "Add request validation to the create endpoint",
    "immediate_file": "src/api/routes.py",
    "immediate_why": "Missing validation caused 400s in production",
    "execplan_path": ".agent/plans/EXECPLAN-P1-validation.md",
    "last_checkpoint": "2025-01-05 12:00Z",
    "red_lines": [
      "Do not add GPL dependencies",
      "Do not bypass auth checks"
    ],
    "blockers": ["None"]
  },
  "runbook": {
    "metadata": {
      "repo_root": "/path/to/ExampleProject",
      "shell": "bash",
      "env_file": ".env"
    },
    "commands": [
      {
        "id": "dev.server",
        "action": "Start dev server",
        "command": "PYTHONPATH=. uvicorn src.main:app --reload --port 8000",
        "scope": "dev",
        "preconditions": "deps installed",
        "expected": "Uvicorn running on http://127.0.0.1:8000",
        "side_effects": "opens port 8000",
        "safe": "yes"
      },
      {
        "id": "test.all",
        "action": "Run all tests",
        "command": "PYTHONPATH=. pytest -v",
        "scope": "test",
        "preconditions": "deps installed",
        "expected": "N passed",
        "side_effects": "none",
        "safe": "yes"
      }
    ],
    "command_args": [
      {"id": "test.single", "args": "{PATH}", "example": "PYTHONPATH=. pytest tests/unit/test_api.py -v"}
    ],
    "phase_scripts": [
      {
        "id": "phase-1.migrate",
        "script": "scripts/migrate.py",
        "command": "PYTHONPATH=. python scripts/migrate.py --dry-run",
        "scope": "phase-1",
        "preconditions": "db reachable",
        "expected": "Migration plan printed"
      }
    ],
    "troubleshooting": [
      {
        "pattern": "(Connection refused|ECONNREFUSED)",
        "diagnosis": "Service not running",
        "next_command": "lsof -i :8000"
      }
    ],
    "services": [
      {
        "service": "Postgres",
        "purpose": "Primary database",
        "endpoint": "postgres://localhost:5432/app",
        "auth": "user/password",
        "health_command": "pg_isready -h localhost"
      }
    ],
    "maintenance": [
      {"task": "Refresh test data", "frequency": "weekly", "command": "PYTHONPATH=. python scripts/seed.py", "safe": "yes"}
    ]
  },
  "status": {
    "updated": "2025-01-05",
    "phases": [
      {"phase": "0", "name": "Bootstrap", "status": "COMPLETE", "goal": "Project scaffolding complete", "evidence": "docs/ACCEPTANCE_TESTS.md#P0"},
      {"phase": "1", "name": "API", "status": "IN_PROGRESS", "goal": "API stable and validated", "evidence": "docs/ACCEPTANCE_TESTS.md#P1"}
    ],
    "current_phase": {
      "phase": "1",
      "name": "API",
      "goal": "Requests validated and error handling consistent",
      "evidence_targets": [
        {"label": "TEST-P1-01", "path": "docs/ACCEPTANCE_TESTS.md#P1"}
      ],
      "risks": ["Validation logic duplicated in handlers"],
      "notes": ["Keep schema changes behind Ask First"]
    }
  },
  "skills": [
    {
      "name": "pdf-reporting",
      "title": "PDF Reporting",
      "description": "Generate PDF reports and fill templates. Use when user asks to create or update PDF reports, populate forms, or extract tables.",
      "overview": "Produce PDF outputs from structured data and templates.",
      "quick_start": {
        "command": "python3 scripts/render_report.py input.json output.pdf",
        "expected": "Report written to output.pdf"
      },
      "inputs": {
        "required_files": ["input.json"],
        "required_data": "JSON report payload",
        "preconditions": "report templates present"
      },
      "scripts": [
        {
          "path": "scripts/render_report.py",
          "purpose": "Render a PDF report",
          "required_args": "<input> <output>",
          "optional_args": "[--template TEMPLATE]",
          "command": "python3 scripts/render_report.py <input> <output>",
          "expected": "PDF created"
        }
      ],
      "workflow": ["Validate input JSON", "Render PDF", "Verify output"],
      "references": [
        {"file": "references/templates.md", "when": "template selection or layout rules needed"}
      ],
      "assets": [
        {"file": "assets/report-template.json", "purpose": "Base report layout"}
      ],
      "examples": [
        {"name": "Render report", "command": "python3 scripts/render_report.py input.json report.pdf", "output": "Report written to report.pdf"}
      ]
    }
  ]
}
